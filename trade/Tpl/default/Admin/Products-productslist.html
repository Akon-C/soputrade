<include file="../Public/admintop" />
<include file="../Public/adminleft" />
<script type="text/javascript">
function attr(){
 $("#listform").attr("action","{:U('Products/attredit')}");
 $("#listform").submit();
}
function delprodcuts(){
	var id=$('input:checkbox[name^=id]:checked').map(function(){
		return $(this).val();
	}).get().join(",");
	if(!id){
		alert('请选择要删除的项!');
	}else{
		$.post("{:U('Products/delete')}","id="+id);
		$('input:checkbox[name^=id]:checked').parent().parent().remove();
	}
}
$(document).ready (
				   function(){
					   
					  $("a[name^='del_']").click(
						function(){
							var answer = confirm("确认要删除吗?");
							if(answer){
								window.location = $(this).attr("href");

							}
							else{
							   
								$(this).attr("href","javascript:void(0);");
								
							}

						}
						);
					   $("#checkAll").click(
						 function () {
						   $("input:checkbox[name^=id]").attr("checked",$(this).attr("checked"));
						 }
					  );

				   }
				   );

</script>
<!-- Content (Right Column) -->
		<div id="content" class="box">

			<h1>产品管理</h1>
            <p class="msg info">提示：</p>
            	
            <p id="btn-create" class="box">
              <a href="{:U('Products/add')}">添加新产品</a>
            </p>
            <p id="btn-create" class="box">
            <form action="{:U('Products/productslist')}" method="get">
            产品名称:<input type="text" size="20" name="name" class="input-text" value="" />分类<select name="cateid" class="input-text" >
                        <option value="">请选择...</option>
                        <volist name="catetree" id="vo">
                        <option value="{$vo['id']}">{:class_str_insert($vo['deep'],"&nbsp;&nbsp;&nbsp;")}{$vo.name}</option>
                        </volist>
                        </select>
                        <input type="submit" value="搜索" />
            </form>
            </p>
            <form action="#" method="post" id="listform">
            <table width="100%">
				<tr pid="0">
				    <th style="text-align:center" width="7%"><input type="checkbox" id="checkAll"/></th>
				    <th style="text-align:center" width="25%">名称</th>
				    <th style="text-align:center" width="15%">排序</th>
                    <th style="text-align:center" width="7%">最新</th>
                    <th style="text-align:center" width="7%">热卖</th>
                    <th style="text-align:center" width="7%">推荐</th>
                    <th style="text-align:center" width="7%">特价</th>                
                    <th style="text-align:center" >操作</th>
				</tr>
                <volist name="list" id="vo">
                <tr >
                    <td style="text-align:left" ><input type="checkbox" name="id[]" value="{$vo.id}" /></td>
				    <td style="text-align:left" id="classname" >{$vo.name}</td>
				    <td style="text-align:left" >{$vo['sort']}</td>
                    <td style="text-align:left" >{:getStatus($vo["isnew"],true)}</td>
                    <td style="text-align:left" >{:getStatus($vo["ishot"],true)}</td>
                    <td style="text-align:left" >{:getStatus($vo["isrec"],true)}</td>
                    <td style="text-align:left" >{:getStatus($vo["isprice"],true)}</td>
                    <td style="text-align:center" ><a href="{:u('Products/attredit',array('id'=>$vo['id']))}">属性编辑</a>&nbsp;|&nbsp;<a href="{:u('Products/edit',array('id'=>$vo['id']))}">编辑</a>&nbsp;|&nbsp;<a name="del_{$vo.id}"  href="{:u('Products/Delete',array('id'=>$vo['id']))}" >移除</a></td>
                </tr>
                </volist>
				
			</table>
            <p class="t-left"><input type="button" value="编辑属性" onclick="attr();" /> <input type="button" value="删除产品" onclick="delprodcuts();" /></p>
            <p class="t-right">{$show}</p>
            </form>
		</div> <!-- /content -->

<include file="../Public/adminfooter" />